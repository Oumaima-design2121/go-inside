<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complex Ions Formation - Interactive Lesson</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f5f7;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(to bottom, #f9f5f7, #f0e6ed);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(200, 150, 180, 0.2);
            overflow: hidden;
            border: 1px solid #f0d8e8;
        }
        
        header {
            background: linear-gradient(to right, #f8bbd9, #f48fb1);
            color: white;
            padding: 30px 40px;
            text-align: center;
            border-bottom: 5px solid #ec407a;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .lesson-icon {
            font-size: 2rem;
            margin-right: 15px;
            vertical-align: middle;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 30px;
        }
        
        .content-section {
            flex: 1;
            min-width: 300px;
            padding: 20px;
        }
        
        .sidebar {
            flex: 0 0 300px;
            background-color: #faf0f6;
            border-radius: 15px;
            padding: 25px;
            margin-left: 20px;
            box-shadow: 0 5px 15px rgba(200, 150, 180, 0.1);
            border: 1px solid #f0d8e8;
        }
        
        h2 {
            color: #d81b60;
            margin: 25px 0 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #f8bbd9;
        }
        
        h3 {
            color: #ec407a;
            margin: 20px 0 10px;
        }
        
        .definition-box {
            background-color: #fef7fa;
            border-left: 5px solid #f48fb1;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 10px rgba(244, 143, 177, 0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(200, 150, 180, 0.1);
        }
        
        th {
            background-color: #f48fb1;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0d8e8;
        }
        
        tr:nth-child(even) {
            background-color: #fef7fa;
        }
        
        tr:hover {
            background-color: #fce4ec;
        }
        
        .formula {
            background-color: #f8e1e7;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Cambria', 'Times New Roman', serif;
            font-size: 1.1rem;
            box-shadow: 0 3px 8px rgba(200, 150, 180, 0.1);
        }
        
        .simulation-container {
            background-color: #faf0f6;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
            border: 2px solid #f0d8e8;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .compact-beaker-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .compact-beaker {
            width: 150px;
            height: 180px;
            background-color: #e8f4f8;
            border-radius: 0 0 15px 15px;
            position: relative;
            border: 4px solid #b2ebf2;
            overflow: hidden;
            margin: 10px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .beaker-label {
            position: absolute;
            bottom: -25px;
            width: 100%;
            text-align: center;
            font-weight: bold;
            color: #d81b60;
            font-size: 0.9rem;
        }
        
        .solution {
            position: absolute;
            bottom: 0;
            width: 100%;
            transition: height 1s, background-color 1.5s;
        }
        
        #compact-zncl2-solution {
            background-color: rgba(33, 150, 243, 0.3);
            height: 60%;
        }
        
        #compact-naoh-solution {
            background-color: rgba(76, 175, 80, 0.3);
            height: 80%;
        }
        
        #compact-reaction-beaker {
            background-color: rgba(255, 255, 255, 0.9);
            width: 180px;
        }
        
        #compact-reaction-solution {
            background-color: rgba(33, 150, 243, 0.3);
            height: 60%;
        }
        
        .compact-precipitate {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 1s, height 1s;
        }
        
        .compact-controls {
            margin: 15px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .compact-controls button {
            margin: 5px;
            padding: 10px 15px;
            font-size: 0.9rem;
        }
        
        .compact-reaction-steps {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .compact-step {
            background-color: white;
            border-radius: 8px;
            padding: 12px;
            margin: 8px;
            width: 180px;
            box-shadow: 0 4px 10px rgba(200, 150, 180, 0.1);
            border: 2px solid #f0d8e8;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .compact-step.active {
            border-color: #ec407a;
            background-color: #fef7fa;
            transform: scale(1.05);
        }
        
        button {
            background-color: #f48fb1;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(244, 143, 177, 0.3);
        }
        
        button:hover {
            background-color: #ec407a;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(236, 64, 122, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .notes-box {
            background-color: #fef7fa;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            border: 2px dashed #f48fb1;
        }
        
        .notes-box ul {
            padding-left: 20px;
            margin: 15px 0;
        }
        
        .notes-box li {
            margin-bottom: 10px;
        }
        
        .qa-section {
            margin: 30px 0;
        }
        
        .question {
            background-color: #faf0f6;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #f48fb1;
        }
        
        .answer {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .show-answer {
            background-color: #81c784;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .quiz-container {
            margin: 40px 0;
            padding: 25px;
            background-color: #faf0f6;
            border-radius: 15px;
            border: 2px solid #f0d8e8;
        }
        
        .quiz-question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f0d8e8;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            margin-top: 15px;
        }
        
        .option {
            padding: 12px 15px;
            margin: 8px 0;
            background-color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #f0d8e8;
        }
        
        .option:hover {
            background-color: #fce4ec;
        }
        
        .option.correct {
            background-color: #c8e6c9;
            border-color: #4caf50;
            color: #2e7d32;
        }
        
        .option.incorrect {
            background-color: #ffcdd2;
            border-color: #f44336;
            color: #c62828;
        }
        
        .result {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background-color: #fef7fa;
            border-radius: 10px;
            display: none;
        }
        
        .score {
            font-size: 1.8rem;
            color: #d81b60;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .alpha-section {
            background-color: #faf0f6;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            border: 2px solid #f0d8e8;
        }
        
        .alpha-equation {
            background-color: #f8e1e7;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Cambria', 'Times New Roman', serif;
            font-size: 1rem;
            box-shadow: 0 3px 8px rgba(200, 150, 180, 0.1);
            overflow-x: auto;
        }
        
        footer {
            background: linear-gradient(to right, #f8bbd9, #f48fb1);
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
            border-top: 5px solid #ec407a;
        }
        
        .quote-box {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            max-width: 800px;
            margin: 0 auto;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .quote {
            font-style: italic;
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            color: #000;
        }
        
        .special-message-container {
            text-align: center;
            margin: 40px 0;
            padding: 20px;
        }
        
        .heart-button {
            background-color: #ec407a;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(236, 64, 122, 0.4);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .heart-button:hover {
            background-color: #d81b60;
            transform: scale(1.1);
            box-shadow: 0 12px 25px rgba(216, 27, 96, 0.5);
        }
        
        .heart-icon {
            margin-right: 10px;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .message-display {
            background-color: #fef7fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 2px dashed #f48fb1;
            display: none;
            font-size: 1.2rem;
            color: #d81b60;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                margin-left: 0;
                margin-top: 30px;
            }
            
            .compact-beaker-container {
                flex-direction: column;
                align-items: center;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .compact-beaker {
                width: 130px;
                height: 160px;
            }
            
            #compact-reaction-beaker {
                width: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-atom lesson-icon"></i>Complex Ions Formation</h1>
            <p>An interactive lesson on coordination compounds, complex formation, and amphoteric behavior</p>
        </header>
        
        <div class="main-content">
            <div class="content-section">
                <div class="definition-box">
                    <h2><i class="fas fa-book-open"></i> What are Complex Ions?</h2>
                    <p><strong>Complex ions</strong> are charged species consisting of a central metal ion bonded to one or more molecules or anions called <strong>ligands</strong>. These ligands donate electron pairs to the metal ion, forming coordinate covalent bonds.</p>
                    <p>Complex ions form in a stepwise process characterized by a <strong>formation constant (K<sub>f</sub>)</strong> that is much greater than 1, indicating the complex is stable in solution.</p>
                </div>
                
                <h2><i class="fas fa-reaction"></i> Complex Formation Reactions</h2>
                <p>When a hydrated metal ion encounters ligands in solution, it can exchange water molecules for other ligands:</p>
                
                <div class="formula">
                    M(H<sub>2</sub>O)<sub>4</sub><sup>2+</sup>(aq) + 4NH<sub>3</sub>(aq) ⇌ M(NH<sub>3</sub>)<sub>4</sub><sup>2+</sup>(aq) + 4H<sub>2</sub>O(l)
                </div>
                
                <p>The formation constant expression for this reaction is:</p>
                
                <div class="formula">
                    K<sub>f</sub> = [M(NH<sub>3</sub>)<sub>4</sub><sup>2+</sup>] / [M(H<sub>2</sub>O)<sub>4</sub><sup>2+</sup>][NH<sub>3</sub>]<sup>4</sup>
                </div>
                
                <h3>Stepwise Formation Constants</h3>
                <p>Complex formation happens in steps, each with its own formation constant:</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>Step</th>
                            <th>Reaction</th>
                            <th>Formation Constant</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>M(H<sub>2</sub>O)<sub>4</sub><sup>2+</sup> + NH<sub>3</sub> ⇌ M(H<sub>2</sub>O)<sub>3</sub>(NH<sub>3</sub>)<sup>2+</sup> + H<sub>2</sub>O</td>
                            <td>K<sub>f1</sub></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>M(H<sub>2</sub>O)<sub>3</sub>(NH<sub>3</sub>)<sup>2+</sup> + NH<sub>3</sub> ⇌ M(H<sub>2</sub>O)<sub>2</sub>(NH<sub>3</sub>)<sub>2</sub><sup>2+</sup> + H<sub>2</sub>O</td>
                            <td>K<sub>f2</sub></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>M(H<sub>2</sub>O)<sub>2</sub>(NH<sub>3</sub>)<sub>2</sub><sup>2+</sup> + NH<sub>3</sub> ⇌ M(H<sub>2</sub>O)(NH<sub>3</sub>)<sub>3</sub><sup>2+</sup> + H<sub>2</sub>O</td>
                            <td>K<sub>f3</sub></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>M(H<sub>2</sub>O)(NH<sub>3</sub>)<sub>3</sub><sup>2+</sup> + NH<sub>3</sub> ⇌ M(NH<sub>3</sub>)<sub>4</sub><sup>2+</sup> + H<sub>2</sub>O</td>
                            <td>K<sub>f4</sub></td>
                        </tr>
                    </tbody>
                </table>
                
                <p>The overall formation constant is the product of the stepwise constants:</p>
                
                <div class="formula">
                    K<sub>f</sub> = K<sub>f1</sub> × K<sub>f2</sub> × K<sub>f3</sub> × K<sub>f4</sub>
                </div>
                
                <div class="alpha-section">
                    <h2><i class="fas fa-chart-line"></i> Alpha Values for Metal-Ligand Complexes (Slide 4)</h2>
                    <p>Alpha (α) values represent the fraction of total metal present as a particular complex species. They are useful for understanding the distribution of complexes at different ligand concentrations.</p>
                    
                    <div class="alpha-equation">
                        α<sub>M</sub> = [M] / c<sub>M</sub> &nbsp;&nbsp;&nbsp; α<sub>ML</sub> = [ML] / c<sub>M</sub> &nbsp;&nbsp;&nbsp; α<sub>ML₂</sub> = [ML₂] / c<sub>M</sub>
                    </div>
                    
                    <p>Where c<sub>M</sub> is the total metal concentration:</p>
                    
                    <div class="alpha-equation">
                        c<sub>M</sub> = [M] + [ML] + [ML₂] + ... + [ML<sub>n</sub>]
                    </div>
                    
                    <p>Using the overall formation constants (β<sub>n</sub>), we can express α values as:</p>
                    
                    <div class="alpha-equation">
                        α<sub>M</sub> = [M]/c<sub>M</sub> = 1 / [1 + β<sub>1</sub>[L] + β<sub>2</sub>[L]<sup>2</sup> + β<sub>3</sub>[L]<sup>3</sup> + ... + β<sub>n</sub>[L]<sup>n</sup>]
                    </div>
                    
                    <div class="alpha-equation">
                        α<sub>ML</sub> = [ML]/c<sub>M</sub> = β<sub>1</sub>[L] / [1 + β<sub>1</sub>[L] + β<sub>2</sub>[L]<sup>2</sup> + β<sub>3</sub>[L]<sup>3</sup> + ... + β<sub>n</sub>[L]<sup>n</sup>]
                    </div>
                    
                    <p>Where β<sub>n</sub> = K<sub>1</sub> × K<sub>2</sub> × ... × K<sub>n</sub> (overall formation constant for ML<sub>n</sub>)</p>
                    
                    <p><strong>Key Insight:</strong> Alpha values help us understand which complex species predominates at different ligand concentrations. When [L] is very small, α<sub>M</sub> is close to 1 (most metal is uncomplexed). As [L] increases, α values for higher complexes increase.</p>
                </div>
                
                <h2><i class="fas fa-flask"></i> Amphoteric Behavior of Zinc Hydroxide</h2>
                <p>Some metal hydroxides, like Zn(OH)<sub>2</sub>, are amphoteric - they can act as both acids and bases. This leads to interesting behavior when adding NaOH to Zn<sup>2+</sup> solutions:</p>
                
                <div class="simulation-container">
                    <h3>Interactive Simulation</h3>
                    <p>Observe what happens when you add sodium hydroxide (NaOH) to a zinc chloride (ZnCl<sub>2</sub>) solution:</p>
                    
                    <div class="compact-beaker-container">
                        <div class="compact-beaker">
                            <div class="solution" id="compact-zncl2-solution"></div>
                            <div class="beaker-label">ZnCl<sub>2</sub> Solution</div>
                        </div>
                        
                        <div class="compact-beaker">
                            <div class="solution" id="compact-naoh-solution"></div>
                            <div class="beaker-label">NaOH Solution</div>
                        </div>
                        
                        <div class="compact-beaker" id="compact-reaction-beaker">
                            <div class="solution" id="compact-reaction-solution"></div>
                            <div class="compact-precipitate" id="compact-precipitate"></div>
                            <div class="beaker-label">Reaction Beaker</div>
                        </div>
                    </div>
                    
                    <div class="compact-controls">
                        <button id="compact-add-small" onclick="compactAddNaOH('small')">Add Small Amount of NaOH</button>
                        <button id="compact-add-more" onclick="compactAddNaOH('more')">Add More NaOH</button>
                        <button id="compact-add-excess" onclick="compactAddNaOH('excess')">Add Excess NaOH</button>
                        <button id="compact-reset-btn" onclick="compactResetSimulation()">Reset Experiment</button>
                    </div>
                    
                    <div class="compact-reaction-steps">
                        <div class="compact-step" id="compact-step1">
                            <h4>Step 1: Initial State</h4>
                            <p>Zn<sup>2+</sup> ions in solution</p>
                        </div>
                        <div class="compact-step" id="compact-step2">
                            <h4>Step 2: Precipitation</h4>
                            <p>Zn<sup>2+</sup> + 2OH<sup>-</sup> → Zn(OH)<sub>2</sub>(s)</p>
                        </div>
                        <div class="compact-step" id="compact-step3">
                            <h4>Step 3: Complex Formation</h4>
                            <p>Zn(OH)<sub>2</sub>(s) + 2OH<sup>-</sup> → Zn(OH)<sub>4</sub><sup>2-</sup>(aq)</p>
                        </div>
                    </div>
                    
                    <div id="compact-reaction-description">
                        <p><strong>Current State:</strong> Zinc ions are dissolved in water.</p>
                    </div>
                </div>
                
                <h2><i class="fas fa-table"></i> Formation Constants of Some Complex Ions</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Complex Ion</th>
                            <th>K<sub>f</sub></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ag(CN)<sub>2</sub><sup>-</sup></td>
                            <td>3.0 × 10<sup>20</sup></td>
                        </tr>
                        <tr>
                            <td>Ag(NH<sub>3</sub>)<sub>2</sub><sup>+</sup></td>
                            <td>1.7 × 10<sup>7</sup></td>
                        </tr>
                        <tr>
                            <td>Cu(NH<sub>3</sub>)<sub>4</sub><sup>2+</sup></td>
                            <td>5.6 × 10<sup>11</sup></td>
                        </tr>
                        <tr>
                            <td>Fe(CN)<sub>6</sub><sup>4-</sup></td>
                            <td>3 × 10<sup>35</sup></td>
                        </tr>
                        <tr>
                            <td>Zn(OH)<sub>4</sub><sup>2-</sup></td>
                            <td>3 × 10<sup>15</sup></td>
                        </tr>
                        <tr>
                            <td>Al(OH)<sub>4</sub><sup>-</sup></td>
                            <td>3 × 10<sup>33</sup></td>
                        </tr>
                    </tbody>
                </table>
                
                <h2><i class="fas fa-lightbulb"></i> Key Concepts & Notes</h2>
                <div class="notes-box">
                    <h3>Important Points to Remember:</h3>
                    <ul>
                        <li>Complex ions consist of a central metal ion bonded to ligands.</li>
                        <li>Ligands act as <strong>Lewis bases</strong> (electron pair donors), while metal ions act as <strong>Lewis acids</strong> (electron pair acceptors).</li>
                        <li>Formation constants (K<sub>f</sub>) indicate the stability of complexes - larger values mean more stable complexes.</li>
                        <li>Dissociation constant (K<sub>d</sub>) is the reciprocal of K<sub>f</sub>: K<sub>d</sub> = 1/K<sub>f</sub>.</li>
                        <li>Adding ligands that form complexes with cations can increase the solubility of slightly soluble ionic compounds.</li>
                        <li>Amphoteric hydroxides can dissolve in both acidic and basic solutions.</li>
                        <li>Complex formation is often a stepwise process with intermediate species.</li>
                        <li>Alpha (α) values represent the fraction of total metal present as specific complex species.</li>
                        <li>The color of coordination compounds is often due to d-d electron transitions.</li>
                    </ul>
                </div>
                
                <div class="qa-section">
                    <h2><i class="fas fa-question-circle"></i> Theoretical Questions & Answers</h2>
                    
                    <div class="question">
                        <h3>1. Why does adding ammonia increase the solubility of AgCl?</h3>
                        <button class="show-answer" onclick="toggleAnswer(1)">Show Answer</button>
                        <div class="answer" id="answer1">
                            <p>Ammonia acts as a ligand that forms a stable complex with Ag<sup>+</sup> ions: Ag<sup>+</sup> + 2NH<sub>3</sub> ⇌ Ag(NH<sub>3</sub>)<sub>2</sub><sup>+</sup>. This complex has a high formation constant (K<sub>f</sub> = 1.7 × 10<sup>7</sup>), which removes Ag<sup>+</sup> ions from solution. According to Le Chatelier's principle, this shifts the equilibrium of AgCl(s) ⇌ Ag<sup>+</sup>(aq) + Cl<sup>-</sup>(aq) to the right, dissolving more AgCl.</p>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h3>2. What is the relationship between K<sub>f</sub> and K<sub>d</sub> for a complex ion?</h3>
                        <button class="show-answer" onclick="toggleAnswer(2)">Show Answer</button>
                        <div class="answer" id="answer2">
                            <p>K<sub>f</sub> (formation constant) and K<sub>d</sub> (dissociation constant) are reciprocals of each other. If K<sub>f</sub> represents the equilibrium constant for complex formation: M + nL ⇌ ML<sub>n</sub>, then K<sub>d</sub> represents the reverse reaction: ML<sub>n</sub> ⇌ M + nL. Therefore, K<sub>d</sub> = 1/K<sub>f</sub>. A large K<sub>f</sub> (stable complex) corresponds to a small K<sub>d</sub> (complex doesn't dissociate easily).</p>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h3>3. Explain the amphoteric behavior of Zn(OH)<sub>2</sub>.</h3>
                        <button class="show-answer" onclick="toggleAnswer(3)">Show Answer</button>
                        <div class="answer" id="answer3">
                            <p>Zn(OH)<sub>2</sub> is amphoteric because it can react with both acids and bases:
                            <br><strong>With acids:</strong> Zn(OH)<sub>2</sub>(s) + 2H<sup>+</sup> → Zn<sup>2+</sup>(aq) + 2H<sub>2</sub>O(l)
                            <br><strong>With bases:</strong> Zn(OH)<sub>2</sub>(s) + 2OH<sup>-</sup> → Zn(OH)<sub>4</sub><sup>2-</sup>(aq)
                            <br>The second reaction forms a hydroxo complex ion, which is soluble. This explains why the precipitate dissolves when excess NaOH is added.</p>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h3>4. What do alpha (α) values represent in complex formation?</h3>
                        <button class="show-answer" onclick="toggleAnswer(4)">Show Answer</button>
                        <div class="answer" id="answer4">
                            <p>Alpha (α) values represent the fraction or percentage of total metal present as a particular complex species. For example:
                            <br>α<sub>M</sub> = [M]/c<sub>M</sub> (fraction as free metal ion)
                            <br>α<sub>ML</sub> = [ML]/c<sub>M</sub> (fraction as ML complex)
                            <br>α<sub>ML2</sub> = [ML<sub>2</sub>]/c<sub>M</sub> (fraction as ML<sub>2</sub> complex)
                            <br>Where c<sub>M</sub> is the total metal concentration. These values depend on ligand concentration and formation constants, helping us understand which species predominates under different conditions.</p>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h3>5. How does stepwise complex formation differ from overall formation?</h3>
                        <button class="show-answer" onclick="toggleAnswer(5)">Show Answer</button>
                        <div class="answer" id="answer5">
                            <p>Stepwise complex formation occurs through a series of successive equilibria, where ligands are added one at a time:
                            <br>M + L ⇌ ML (K<sub>1</sub>)
                            <br>ML + L ⇌ ML<sub>2</sub> (K<sub>2</sub>)
                            <br>ML<sub>2</sub> + L ⇌ ML<sub>3</sub> (K<sub>3</sub>), etc.
                            <br>The overall formation constant (β<sub>n</sub>) for the reaction M + nL ⇌ ML<sub>n</sub> is the product of the stepwise constants: β<sub>n</sub> = K<sub>1</sub> × K<sub>2</sub> × ... × K<sub>n</sub>.
                            <br>Stepwise constants help us understand intermediate species, while overall constants tell us about the complete complex.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <h2><i class="fas fa-clipboard-check"></i> Quick Quiz</h2>
                <p>Test your understanding with these questions. Select an answer to see if you're correct!</p>
                
                <div class="quiz-container">
                    <div class="quiz-question" id="q1">
                        <p><strong>1. What is a complex ion?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q1', 'b')">a) An ion with a complicated structure</div>
                            <div class="option" onclick="checkAnswer(this, 'q1', 'b')">b) A central metal ion bonded to ligands</div>
                            <div class="option" onclick="checkAnswer(this, 'q1', 'b')">c) Any ion with multiple atoms</div>
                            <div class="option" onclick="checkAnswer(this, 'q1', 'b')">d) An ion that forms complexes</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q2">
                        <p><strong>2. What role does a ligand play in complex formation?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q2', 'b')">a) Lewis acid (electron pair acceptor)</div>
                            <div class="option" onclick="checkAnswer(this, 'q2', 'b')">b) Lewis base (electron pair donor)</div>
                            <div class="option" onclick="checkAnswer(this, 'q2', 'b')">c) Bronsted-Lowry acid</div>
                            <div class="option" onclick="checkAnswer(this, 'q2', 'b')">d) Reducing agent</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q3">
                        <p><strong>3. What happens when you add a small amount of NaOH to a Zn<sup>2+</sup> solution?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q3', 'a')">a) Forms a white precipitate of Zn(OH)<sub>2</sub></div>
                            <div class="option" onclick="checkAnswer(this, 'q3', 'a')">b) Forms a soluble complex immediately</div>
                            <div class="option" onclick="checkAnswer(this, 'q3', 'a')">c) No visible change</div>
                            <div class="option" onclick="checkAnswer(this, 'q3', 'a')">d) Forms a colored solution</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q4">
                        <p><strong>4. What is the relationship between K<sub>f</sub> and K<sub>d</sub>?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q4', 'd')">a) K<sub>f</sub> = K<sub>d</sub></div>
                            <div class="option" onclick="checkAnswer(this, 'q4', 'd')">b) K<sub>f</sub> = 2 × K<sub>d</sub></div>
                            <div class="option" onclick="checkAnswer(this, 'q4', 'd')">c) K<sub>f</sub> = K<sub>d</sub><sup>2</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q4', 'd')">d) K<sub>d</sub> = 1/K<sub>f</sub></div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q5">
                        <p><strong>5. Which complex has the highest formation constant?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q5', 'a')">a) Fe(CN)<sub>6</sub><sup>4-</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q5', 'a')">b) Ag(NH<sub>3</sub>)<sub>2</sub><sup>+</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q5', 'a')">c) Zn(OH)<sub>4</sub><sup>2-</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q5', 'a')">d) CdI<sub>4</sub><sup>2-</sup></div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q6">
                        <p><strong>6. What happens when excess NaOH is added to Zn(OH)<sub>2</sub> precipitate?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q6', 'c')">a) More precipitate forms</div>
                            <div class="option" onclick="checkAnswer(this, 'q6', 'c')">b) The color changes</div>
                            <div class="option" onclick="checkAnswer(this, 'q6', 'c')">c) The precipitate dissolves</div>
                            <div class="option" onclick="checkAnswer(this, 'q6', 'c')">d) Gas is evolved</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q7">
                        <p><strong>7. What does α<sub>M</sub> represent in complex formation?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q7', 'b')">a) The formation constant</div>
                            <div class="option" onclick="checkAnswer(this, 'q7', 'b')">b) Fraction of metal as free ion</div>
                            <div class="option" onclick="checkAnswer(this, 'q7', 'b')">c) Ligand concentration</div>
                            <div class="option" onclick="checkAnswer(this, 'q7', 'b')">d) Complex ion charge</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q8">
                        <p><strong>8. Which of these is NOT a common coordination number?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q8', 'c')">a) 2</div>
                            <div class="option" onclick="checkAnswer(this, 'q8', 'c')">b) 4</div>
                            <div class="option" onclick="checkAnswer(this, 'q8', 'c')">c) 5</div>
                            <div class="option" onclick="checkAnswer(this, 'q8', 'c')">d) 6</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q9">
                        <p><strong>9. What is the geometry of [Ag(NH<sub>3</sub>)<sub>2</sub>]<sup>+</sup>?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q9', 'a')">a) Linear</div>
                            <div class="option" onclick="checkAnswer(this, 'q9', 'a')">b) Tetrahedral</div>
                            <div class="option" onclick="checkAnswer(this, 'q9', 'a')">c) Square planar</div>
                            <div class="option" onclick="checkAnswer(this, 'q9', 'a')">d) Octahedral</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q10">
                        <p><strong>10. Which metal ion commonly shows amphoteric behavior?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q10', 'b')">a) Na<sup>+</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q10', 'b')">b) Zn<sup>2+</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q10', 'b')">c) Ca<sup>2+</sup></div>
                            <div class="option" onclick="checkAnswer(this, 'q10', 'b')">d) K<sup>+</sup></div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q11">
                        <p><strong>11. If β<sub>2</sub> = K<sub>1</sub> × K<sub>2</sub>, what does β<sub>2</sub> represent?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q11', 'c')">a) Stepwise constant for ML formation</div>
                            <div class="option" onclick="checkAnswer(this, 'q11', 'c')">b) Dissociation constant</div>
                            <div class="option" onclick="checkAnswer(this, 'q11', 'c')">c) Overall constant for ML<sub>2</sub> formation</div>
                            <div class="option" onclick="checkAnswer(this, 'q11', 'c')">d) Alpha value for free metal</div>
                        </div>
                    </div>
                    
                    <div class="quiz-question" id="q12">
                        <p><strong>12. What happens to α<sub>M</sub> as ligand concentration increases?</strong></p>
                        <div class="options">
                            <div class="option" onclick="checkAnswer(this, 'q12', 'b')">a) Increases</div>
                            <div class="option" onclick="checkAnswer(this, 'q12', 'b')">b) Decreases</div>
                            <div class="option" onclick="checkAnswer(this, 'q12', 'b')">c) Stays the same</div>
                            <div class="option" onclick="checkAnswer(this, 'q12', 'b')">d) Becomes zero</div>
                        </div>
                    </div>
                    
                    <div class="result" id="quiz-result">
                        <h3>Quiz Results</h3>
                        <p>You answered <span id="score-count">0</span> out of 12 questions correctly!</p>
                        <div class="score" id="score-percentage">0%</div>
                        <button onclick="resetQuiz()">Try Again</button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="calculateScore()">Submit Quiz</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="special-message-container">
            <h2><i class="fas fa-graduation-cap"></i> Special Message for B1 Girls</h2>
            <p>Click the heart button for a special message!</p>
            <button class="heart-button" onclick="showRandomMessage()">
                <i class="fas fa-heart heart-icon"></i> Message for B1 Girls
            </button>
            <div class="message-display" id="message-display">
                <!-- Message will appear here -->
            </div>
        </div>
        
        <footer>
            <div class="quote-box">
                <div class="quote">
                    "Chemistry is the science of matter, but I prefer to see it as the science of change and transformation."
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Compact simulation variables
        let compactReactionStep = 0;
        let compactPrecipitateAmount = 0;
        let compactComplexFormed = false;
        
        // Compact simulation functions
        function compactAddNaOH(amount) {
            const reactionSol = document.getElementById('compact-reaction-solution');
            const precipitate = document.getElementById('compact-precipitate');
            const desc = document.getElementById('compact-reaction-description');
            const step1 = document.getElementById('compact-step1');
            const step2 = document.getElementById('compact-step2');
            const step3 = document.getElementById('compact-step3');
            
            // Reset all steps
            step1.classList.remove('active');
            step2.classList.remove('active');
            step3.classList.remove('active');
            
            if (amount === 'small') {
                compactReactionStep = 1;
                compactPrecipitateAmount = 40;
                precipitate.style.height = compactPrecipitateAmount + '%';
                precipitate.style.opacity = '1';
                precipitate.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
                
                desc.innerHTML = '<p><strong>Current State:</strong> White precipitate of Zn(OH)<sub>2</sub> has formed:<br>Zn<sup>2+</sup>(aq) + 2OH<sup>-</sup>(aq) → Zn(OH)<sub>2</sub>(s)</p>';
                step2.classList.add('active');
                
            } else if (amount === 'more') {
                if (compactReactionStep < 1) return;
                
                compactReactionStep = 2;
                compactPrecipitateAmount = 20;
                precipitate.style.height = compactPrecipitateAmount + '%';
                precipitate.style.opacity = '0.7';
                
                desc.innerHTML = '<p><strong>Current State:</strong> Some precipitate has dissolved as the hydroxo complex begins to form.</p>';
                step2.classList.add('active');
                
            } else if (amount === 'excess') {
                if (compactReactionStep < 1) return;
                
                compactReactionStep = 3;
                compactPrecipitateAmount = 0;
                precipitate.style.height = '0%';
                precipitate.style.opacity = '0';
                reactionSol.style.backgroundColor = 'rgba(33, 150, 243, 0.5)';
                compactComplexFormed = true;
                
                desc.innerHTML = '<p><strong>Current State:</strong> All precipitate has dissolved, forming the soluble hydroxo complex:<br>Zn(OH)<sub>2</sub>(s) + 2OH<sup>-</sup>(aq) → Zn(OH)<sub>4</sub><sup>2-</sup>(aq)</p>';
                step3.classList.add('active');
            }
            
            // Update button states
            compactUpdateButtonStates();
        }
        
        function compactResetSimulation() {
            const reactionSol = document.getElementById('compact-reaction-solution');
            const precipitate = document.getElementById('compact-precipitate');
            const desc = document.getElementById('compact-reaction-description');
            const step1 = document.getElementById('compact-step1');
            const step2 = document.getElementById('compact-step2');
            const step3 = document.getElementById('compact-step3');
            
            compactReactionStep = 0;
            compactPrecipitateAmount = 0;
            compactComplexFormed = false;
            
            reactionSol.style.backgroundColor = 'rgba(33, 150, 243, 0.3)';
            precipitate.style.height = '0%';
            precipitate.style.opacity = '0';
            
            desc.innerHTML = '<p><strong>Current State:</strong> Zinc ions are dissolved in water.</p>';
            
            step1.classList.add('active');
            step2.classList.remove('active');
            step3.classList.remove('active');
            
            compactUpdateButtonStates();
        }
        
        function compactUpdateButtonStates() {
            document.getElementById('compact-add-small').disabled = (compactReactionStep >= 1);
            document.getElementById('compact-add-more').disabled = (compactReactionStep < 1 || compactReactionStep >= 2);
            document.getElementById('compact-add-excess').disabled = (compactReactionStep < 1 || compactReactionStep >= 3);
        }
        
        // Initialize compact simulation
        window.onload = function() {
            compactResetSimulation();
        };
        
        // Toggle answer display for theoretical questions
        function toggleAnswer(questionNum) {
            const answer = document.getElementById('answer' + questionNum);
            const button = event.target;
            
            if (answer.style.display === 'block') {
                answer.style.display = 'none';
                button.textContent = 'Show Answer';
            } else {
                answer.style.display = 'block';
                button.textContent = 'Hide Answer';
            }
        }
        
        // Quiz functionality
        let userAnswers = {
            q1: null, q2: null, q3: null, q4: null, q5: null,
            q6: null, q7: null, q8: null, q9: null, q10: null,
            q11: null, q12: null
        };
        
        const correctAnswers = {
            q1: 'b', q2: 'b', q3: 'a', q4: 'd', q5: 'a',
            q6: 'c', q7: 'b', q8: 'c', q9: 'a', q10: 'b',
            q11: 'c', q12: 'b'
        };
        
        function checkAnswer(optionElement, questionId, correctOption) {
            // Remove any previous selections for this question
            const options = optionElement.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Check if selected answer is correct
            const selectedIndex = Array.from(options).indexOf(optionElement);
            const selectedLetter = ['a', 'b', 'c', 'd'][selectedIndex];
            
            if (selectedLetter === correctAnswers[questionId]) {
                optionElement.classList.add('correct');
                userAnswers[questionId] = true;
            } else {
                optionElement.classList.add('incorrect');
                userAnswers[questionId] = false;
                
                // Highlight correct answer
                const correctIndex = ['a', 'b', 'c', 'd'].indexOf(correctAnswers[questionId]);
                options[correctIndex].classList.add('correct');
            }
        }
        
        function calculateScore() {
            let score = 0;
            const totalQuestions = Object.keys(userAnswers).length;
            
            // Count correct answers
            for (const question in userAnswers) {
                if (userAnswers[question] === true) {
                    score++;
                }
            }
            
            // Display results
            const resultDiv = document.getElementById('quiz-result');
            const scoreCount = document.getElementById('score-count');
            const scorePercentage = document.getElementById('score-percentage');
            
            scoreCount.textContent = score;
            const percentage = Math.round((score / totalQuestions) * 100);
            scorePercentage.textContent = percentage + '%';
            
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function resetQuiz() {
            // Clear all selections
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Reset user answers
            for (const question in userAnswers) {
                userAnswers[question] = null;
            }
            
            // Hide result
            document.getElementById('quiz-result').style.display = 'none';
        }
        
        // Special messages for B1 girls
        const messages = [
            "To Oumaima, Lyna, Tesnim, Duoa, Rania (x2!), Anfal, Kahina, and Rahma: You're all more complex than any coordination compound, and just as amazing! 💖",
            "Dear B1 girls: May your understanding of complex ions be as strong as the bonds in [Fe(CN)₆]⁴⁻! Keep shining bright! ✨",
            "To the brilliant minds of B1: Remember, just like amphoteric hydroxides, you can adapt to any situation and come out stronger! 🌟",
            "Hey B1 superstars! If chemistry problems were ligands, you'd form the most stable complexes with all of them! Keep up the great work! 🧪",
            "To my favorite chemistry class: May your academic journey be as colorful as transition metal complexes and as successful as a perfectly balanced equation! 🌈",
            "Dear B1 girls: Just remember, even when things precipitate in life, adding the right 'ligands' (friendship & hard work) can dissolve any problem! 💪",
            "To the amazing B1 class: You're not just learning chemistry, you're becoming the scientists who will change the world! Never stop asking questions! 🔬",
            "Hey B1! If knowledge was a ligand, you'd all have formation constants off the charts! Keep being awesome! 📚",
            "To Oumaima, Lyna, Tesnim, Duoa, the two Ranias, Anfal, Kahina, and Rahma: Your potential is more limitless than π bonds in coordination compounds! 🚀",
            "Dear B1 girls: May your future be as bright as a flame test and your success as certain as a reaction with ΔG < 0! You've got this! 🎓"
        ];
        
        function showRandomMessage() {
            const messageDisplay = document.getElementById('message-display');
            const randomIndex = Math.floor(Math.random() * messages.length);
            messageDisplay.innerHTML = `<p>${messages[randomIndex]}</p>`;
            messageDisplay.style.display = 'flex';
            
            // Add a little animation
            messageDisplay.style.transform = 'scale(0.9)';
            setTimeout(() => {
                messageDisplay.style.transform = 'scale(1)';
            }, 100);
        }
    </script>
</body>
</html>
</html>